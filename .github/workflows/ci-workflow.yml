name: Continuous Integration Workflow

on:
  pull_request:
  push:

env:
  CI_ACTIONS_ROOT: ./.github/workflows/ci_actions # TODO: GHA seems to check 'uses' syntax at compile time;
                                                  # we might not be able to abstract/re-use this

jobs:
  Static_Analysis:
    runs-on: ubuntu-latest
    permissions:
      id-token: write
      contents: read

    steps:
      - uses: actions/checkout@v3
      - uses: ./.github/workflows/ci_actions/static-analysis

  Build:
    runs-on: ubuntu-latest
    permissions:
      id-token: write
      contents: read