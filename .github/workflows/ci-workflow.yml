name: Continuous Integration Workflow

on:
  pull_request:
  push:

jobs:
  Static_Analysis:
    runs-on: ubuntu-latest
    permissions:
      id-token: write
      contents: read

    steps:
      - uses: actions/checkout@v3
      - uses: ./.github/workflows/ci_actions/static-analysis

  Build:
    build_matrix:
      strategy:
        matrix:
          version: [ 8, 11, 17 ]
          distribution: [corretto, openjdk, temurin]
    runs-on: ubuntu-latest
    permissions:
      id-token: write
      contents: read

    steps:
      - uses: actions/checkout@v3
      - uses: ./.github/workflows/build.yml@main
        with:
          version: ${{ matrix.version }}
          distribution: ${{ matrix.distribution }}